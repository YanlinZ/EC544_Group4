
<html>
<head>
	<title>Remote LED Control</title>
	<link rel="stylesheet" type="text/css" href="Style/style.css" media="screen" />
	<style type="text/css">
		div.LED1 {
		    position: absolute;
		    top: 20%;
		    left: 3%;
		    width: 45%;
		    height: 35%;
		    border: 3px solid #BDBDBD;
		}
		div.LED2 {
		    position: absolute;
		    top: 20%;
		    left: 51%;
		    width: 45%;
		    height: 35%;
		    border: 3px solid #BDBDBD;
		}
		div.LED3 {
		    position: absolute;
		    top: 60%;
		    left: 3%;
		    width: 45%;
		    height: 35%;
		    border: 3px solid #BDBDBD;
		}
		div.LED4 {
		    position: absolute;
		    top: 60%;
		    left: 51%;
		    width: 45%;
		    height: 35%;
		    border: 3px solid #BDBDBD;
		}

	</style>
</head>
<body onload="getStat()">
<div class="LED1">
	<h3 align="middle" 	style="font-size:28px">LED1</h3>
	<img id="myBulb1" onload="initBulb('myBulb1',1)" src="Style/bulbon.gif" height="75%"  style="position: relative; LEFT: 20%">
	<button onclick="onBulb('myBulb1', 1)" style="position: absolute; top:35%; left: 60%" align ="top">on</button>
	<button onclick="offBulb('myBulb1', 1)" style="position: absolute; top:55%; left: 60%" align ="top">off</button>
</div>

<div class="LED2">
	<h3 align="middle" 	style="font-size:28px">LED2</h3>
	<img id="myBulb2" onload="initBulb('myBulb2',2)" src="Style/bulbon.gif" height="75%" style="position: relative; LEFT: 20%">
	<button onclick="onBulb('myBulb2', 2)" style="position: absolute; top:35%; left: 60%" align ="top">on</button>
	<button onclick="offBulb('myBulb2', 2)" style="position: absolute; top:55%; left: 60%" align ="top">off</button>
</div>

<div class="LED3">
	<h3 align="middle" 	style="font-size:28px">LED3</h3>
	<img id="myBulb3" onload="initBulb('myBulb3',3)" src="Style/bulbon.gif" height="75%" style="position: relative; LEFT: 20%">
	<button onclick="onBulb('myBulb3', 3)" style="position: absolute; top:35%; left: 60%" align ="top">on</button>
	<button onclick="offBulb('myBulb3', 3)" style="position: absolute; top:55%; left: 60%" align ="top">off</button>
</div>

<div class="LED4">
	<h3 align="middle" 	style="font-size:28px">LED4</h3>
	<img id="myBulb4" onload="initBulb('myBulb',4)" src="Style/bulbon.gif" height="75%" style="position: relative; LEFT: 20%">
	<button onclick="onBulb('myBulb4', 4)" style="position: absolute; top:35%; left: 60%" align ="top">on</button>
	<button onclick="offBulb('myBulb4', 4)" style="position: absolute;top:55%; left: 60%" align ="top">off</button>
</div>

<script src="/socket.io/socket.io.js"></script>
<script>
  var socket = io();
</script>
<script src="https://cdn.socket.io/socket.io-1.2.0.js"></script>
<script src="http://code.jquery.com/jquery-1.11.1.js"></script>

<script>
	var bStates = [0,1,0,0];

	function getStat(){

		var image1 = document.getElementById('myBulb1');
		var image2 = document.getElementById('myBulb2');
		var image3 = document.getElementById('myBulb3');
		var image4 = document.getElementById('myBulb4');

		if(bStates[0] == 0){image1.src = "Style/bulboff.gif";}
		if(bStates[1] == 0){image2.src = "Style/bulboff.gif";}
		if(bStates[2] == 0){image3.src = "Style/bulboff.gif";}
		if(bStates[3] == 0){image4.src = "Style/bulboff.gif";}
	}
	// function initBulb(bulb,num){
	// 	var image = document.getElementById(bulb);
	// 	if(bStates[num-1]==1){
	// 		image.src = "http://www.w3schools.com/js/pic_bulbon.gif";
	// 	}else{
	// 		image.src = "http://www.w3schools.com/js/pic_bulboff.gif";
	// 	}
	// }
	function onBulb(bulb,num){
		var image = document.getElementById(bulb);
		if(image.src = "Style/bulboff.gif"){
			image.src = "Style/bulbon.gif";
			bStates[num-1] = 1;
			socket.emit('bStates', bStates.toString().replace(/,/g, ''));
		}
	}

	function offBulb (bulb,num) {
		var image = document.getElementById(bulb);
		if(image.src = "Style/bulbon.gif"){
			image.src = "Style/bulboff.gif";
			bStates[num-1] = 0;
			socket.emit('bStates', bStates.toString().replace(/,/g, ''));
		}
	}
</script>
</body>
</html>

<!-- http://www.w3schools.com/js/pic_bulboff.gif
http://www.w3schools.com/js/pic_bulbon.gif -->
